[supervisord]
nodaemon=true

# 服务一：启动 VNC 和 noVNC Web 服务
[program:vnc_web]
command=bash /vnc_web.sh
autostart=true
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0

# 服务二：启动 Playwright 远程服务
[program:playwright_server]
# 直接运行 playwright run-server 命令
# 使用 supervisord 的 %(ENV_VAR)s 语法来引用环境变量
command=python -m playwright run-server --host 0.0.0.0 --port %(ENV_PLAYWRIGHT_PORT)s
autostart=true
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0